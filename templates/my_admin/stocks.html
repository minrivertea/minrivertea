{% extends base_template %}
{% load thumbnail %}

{% block extrajs %}
<script type="text/javascript">
$(document).ready( function() {
  $('#add-stocks').click(function() {
     $('#add-form').toggle();
  });
});
</script>
<script type="text/javascript" src="/admin/jsi18n/"></script>
<script type="text/javascript" src="{{ static_url }}admin/js/core.js"></script>
{{ form.media }}
{% endblock %}

{% block extracss %}


<link rel="stylesheet" type="text/css" href="{{ static_url }}admin/css/forms.css"/>
<link rel="stylesheet" type="text/css" href="{{ static_url }}admin/css/widgets.css"/>

<style type="text/css">

p.filter {font-size: 13px;}

#add-form {
   position: absolute;
   left: 50%;
   margin-left: -300px;
   top: -100px;
   width: 600px;
   padding: 3% 4%;
   background: #fff;
   box-shadow: 0 1px 30px #333;
   display: none;
}

#add-form h2 {
  margin: 0;   
}

#add-form p {
  width: 100%;
  float: left;   
}

#add-form input[type=submit] {
  font-size: 24px;
  padding: 15px 25px;   
}
  
  
a.accept {
    background: none repeat scroll 0 0 #F1F1F1;
    font-family: Helvetica,Arial,sans-serif;
    font-weight: bold;
    padding: 5px;
}
  
span.red {
  font-weight: bold;   
}

#add-stocks {
    float: right;
    position: absolute;
    right: 0;
    top: 0;
}

#mtw {
  padding-bottom: 200px;  
}

a.transfer {
    background: none repeat scroll 0 0 #2A8531;
    border-radius: 2px 2px 2px 2px;
    color: #FFFFFF;
    float: left;
    font-weight: bold;
    line-height: 1em;
    margin: 0 5px 0 0;
    padding: 1px 3px;
    text-decoration: none;
}

a.transfer:hover {
  background: #FF6569;   
}

span.count {
    color: #999999;
    float: left;
    font-size: 10px;
    font-weight: bold;
    left: 3px;
    position: relative;
    top: -2px;
}

span.dot {
  float: left;
  width: 8px;
  height: 8px;
  margin: 2px 2px 0 0;
  background: #999;
  display: block;   
}

span.dot.six {
  background: pink;   
}

span.dot.twelve {
  background: red;   
}

table tr td:first-child {
  background: none;   
  width: 200px;
}

table tr td:first-child a {
  text-decoration: none;
  font-weight: bold;   
}

  
  
  </style>
{% endblock %}

{% block pagetitle %}Admin Stuff{% endblock %}

{% block content %}


<h1>Stocks</h1>
<p class="introduction">Total stock value = £{{ total_stock_value }}</p>
<a href="#" class="button green" id="add-stocks">Add stocks</a>

<table>
    <thead>
        <td>Item</td>
        <td>UK Stock</td>
        <td>Transfer</td>
        <td>China stock</td>
        <td>Total stock value</td>
    </thead>
    {% for x in stocks %}
        <tr>
            <td><a href="{% url admin_product x.parent_product.id %}">{{ x }}</a></td>
            <td width="150">
                <span class="{% if x.uk_stocks.count < 3 %}red{% endif %}">
                    {% for y in x.uk_stocks %}
                        <span class="dot{% if y.months_old == 6 %} six{% endif %}{% if y.months_old == 12 %} twelve{% endif %}">&nbsp;</span>
                    {% endfor %}
                    <span class="count">{{ x.uk_stocks.count }}</span>
                </span>
            </td>
            <td width="150">
                <a class="transfer" href="{% url update_stock_location x.id %}?location=uk">&laquo;</a>
                {% for y in x.in_transit_stocks %}
                    <span class="dot">&nbsp;</span>
                {% endfor %}
            </td>
            <td width="150">
                <a class="transfer" href="{% url update_stock_location x.id %}?location=transit">&laquo;</a>
                {% for y in x.china_stocks %}
                <span class="dot">&nbsp;</span>
                {% endfor %}
                <span class="count">{{ x.china_stocks.count }}</span>
            </td>
            <td>£{{ x.total_value }}</td>
            
        </tr>
    {% endfor %}
</table>

            
<div id="add-form">
    <form method="post" action="{% url add_stocks %}">
        <h2>Add stocks</h2>
        
        {{ form.as_p }}
        
        <input type="submit" class="submit button green" value="Add stocks" />
    </form>
</div>


{% endblock %}
