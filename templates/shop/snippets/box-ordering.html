{% load i18n thumbnail %}

<div id="teaboxes">
<form method="post" action="{% url monthly_order_save %}">

<div class="box teas">    
    {% for x in products %}
       <label for="{{ x.id }}">
        <span class="title">{{ x.name }} - 
            <span class="price">{{ currency.symbol }}{{ x.price.price|floatformat }} <span class="grey">/ {{ x.price.weight }}{{ x.price.weight_unit }}</span></span></span>
        <span class="quantity">0</span>
        <span class="clear">X / Clear</span>
        {% thumbnail x.image thumb_medium crop="" as im %}
           <img src="{{ im.url }}" />
        {% endthumbnail %}
       </label>
       <input value="{{ x.id }}" rel="tea" id="{{ x.id }}" type="checkbox"/>
    {% endfor %}   
</div>

<div class="box frequency">
    <h3>Choose duration</h3>
    <input type="radio" name="freq" value="3" id="freq_3"  /><label for="freq_3">3 months</label>
    <input type="radio" name="freq" value="6" id="freq_6" /><label for="freq_6">6 months</label>
    <input type="radio" name="freq" value="12" id="freq_12" checked="yes" /><label for="freq_12">12 months</label>
</div>



<div class="box" id="price">
    <div id="amount">{{ currency.symbol }}32</div>
    <input type="submit" value="Add to basket" href="" class="button green" />
</div>


</form>
</div>


<script type="text/javascript">
$(document).ready( function() {
    $('#teaboxes .teas label').click( function(e) {
       var num = $(this).children('span.quantity').text();
       num++;
       $(this).addClass('selected');
       $(this).children('span.quantity').text(num);
       e.preventDefault();
       e.stopImmediatePropogation();
       e.stopPropogation();
    });
    
    /// The clear behaviour
    $('#teaboxes .teas label .clear').click( function() {
       $(this).parent('label').removeClass('selected'); 
       $(this).parent('label').children('.quantity').text('0');
       return false;
    });
});
</script>