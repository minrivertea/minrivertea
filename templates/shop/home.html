{% extends base_template %}
{% load thumbnail i18n convert_weights %}

{% block pagetitle %}{% trans 'Exceptional Chinese tea delivered to your door' %}{% endblock %}

{% block metadescription %}{% trans 'We sell exceptional Chinese teas and deliver them to your home. Our teas are authentic, hand-picked and traditionally made in our home in China.' %}{% endblock %}


{% block extrajs %}
<script type="text/javascript">

$('.info.tea a.button').click( function() {
  var thisButton = $(this);
  thisButton.parent('.info.tea').css({'opacity':'0.5'});
  thisButton.parent('.info.tea').append('<img src="{{ static_url }}images/loading.gif" id="loading" />');

  $.ajax({
  	url: thisButton.attr('href'),
	type: "GET",
   	dataType: 'json',
   	success: function(data) {
   		
   		/// increment the values in the header basket
        if ($('#userbasket').hasClass('selected')) {} else {
             $('#userbasket').addClass('selected'); 
             $('#userbasket #quantity').append('<a href="{% url basket %}" title="{% trans 'View your basket' %}" alt="{% trans 'View your basket' %}">{% trans 'Checkout now' %} &raquo;</a>'); 
        }
        $('#quantity .p').text(parseFloat(data.basket_quantity).toFixed(2));
        $('#quantity .q').html(parseInt($('#quantity .q').html(), 10)+1);
   		
   		
   		/// increment the values in the already in basket next to product
   		
   		if (thisButton.parent('.info.tea').find('.in-basket').length) {
	   		var curr = thisButton.parent('.info.tea').find('.in-basket .num');
   			curr.html(parseInt(curr.html(), 10)+1);
   		} else {
   		  	thisButton.parent('.info.tea').find('.pricebar').append('<div class="in-basket"><span class="num">1</span> {% trans "in basket" %}</div>');
   		}   
   		
   		thisButton.parent('.info.tea').find('#loading').remove();
   		thisButton.parent('.info.tea').css({'opacity':'1'});		
   	},
  });
  return false;
});

</script>
{% endblock %}

{% block extracss %}
<style type="text/css">

#teas, #teaware, #about, #experts, #monthly, #brewing, #special {
  float: left;
  width: 100%;
  position: relative;
}

ul#nav li a.selected:before {
 display: none;   
}

h1 {
  font-size: 26px;
  margin: 15px 0 0px;
  float: left;
  width: 100%;
  color: #5f829a;
}

h2.banner {
  font-size: 24px;
  margin: 0 0 20px 0; 
  color: #555;
  float: left;
  width: 100%;  
  text-align: right;
}

#teas {
  margin: 0 0 ;
  border-bottom: none;	
  height: auto;
}

#teas h2 {
  text-align: right;   
}

#teas .info.tea.right:last-child, #teas .info.tea.left:last-child {
  margin-bottom: 0;
}

#benefits img {
  margin: 0;
}


#special {
  float: left;
  width: 100%;
  position: relative;
  background: url('{{ static_url }}images/homepage/special1.jpg') no-repeat top left;
  height: 325px;
}

#special:hover {
  opacity: 0.9;   
}

#special:hover .details h3, #special:hover .details a {
  color: #d30000;   
}

#special .details {
    float: right;
    width: 30%;
    bottom: 10px;
    right: 30px;
    padding: 0;
    position: absolute;
    text-align: right;
}

#special .details h3 {
  font-size: 24px;
  font-weight: 100;
  margin: 10px 0 0;
  letter-spacing: -1px;
  text-shadow: none;
  color: #2a8531;
}

#special .details p {
  font-size: 13px;
  color: #666;
  float: right;
  margin: 5px 0 0;   
}

#special .details .price {
    color: #555555;
    position: absolute;
    top: -10px;
    right: 0px;
    font-size: 15px;
    float: right;
    font-weight: normal;
    letter-spacing: -0.5px;
}

#special .details .price .amount {
  color: #222;
  font-weight: bold;   
}

#experts {
  background: url('{{ static_url }}images/homepage/home-experts.jpg') no-repeat top left;  
  height: 279px;
  margin-bottom: 20px;
}

#experts .glass-text, #monthly .glass-text {
  text-align: left;
  position: absolute;
  left: 20px;
  top: 20px; 
  width: 65%; 
  padding: 15px;  
}

#experts .glass-text:before, #monthly .glass-text:before {
        content: " ";
        display: block;
        width: 0;
        height: 0;
        border-bottom: 20px solid transparent;     
        border-left: 0;
        border-top: 20px solid transparent;
        border-right: 20px solid #fff;
        position: absolute;
        top: 20px;
        left: -20px;
        z-index: 2;
        opacity: 0.8;
}

#experts .glass-text, #monthly .glass-text {
   right: 20px;
   bottom: 20px;
   top: auto;
   left: auto; 
   width: 50%;
   text-align: right; 
}

#experts .glass-text p, #monthly .glass-text p {
  color: #333;   
}

#experts .glass-text h2, #monthly .glass-text h2 {
  font-size: 24px;  
  margin: 0; 
}


#monthly .glass-text {
    width: 55%;
}

#monthly .button {
  position: absolute;
  bottom: 20px;
  right: 20px;   
}

.tag {
    left: 0px;
    margin: 0;
    padding: 0;
    position: absolute;
    text-decoration: none;
    top: -3px;
    z-index: 0;
}

.tag {
  width: 300px;
  height: 13px; 
  -webkit-transform: rotate(-45deg); 
  -moz-transform: rotate(-45deg); 
  -o-transform: rotate(-45deg); 
  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
  background: #1e70cb;
  display: block;
  position: absolute;
  top: 55px;
  left: -100px;
  padding: 10px;
}

.tagtext {
  position: absolute;
  width: 100%;
  display: block;
  text-align: center;
  color: #fff;
  font-weight: bold;
  font-size: 13px;
}

ul.rss {
    left: 200px;
    padding: 0;
    top: 58px;
    width: 80px;
}

#about {
  width: 96%;
  float: left;
  margin: 30px 0; 
  background: #fff;
  padding: 1.5% 2%;
  border-radius: 8px;  
}

#about .info.follow {
  border: none;
  background: none;
  padding: 0; 
  width: auto;
  margin: 10px 0 0 0;  
}

#about .info.follow h3 {
  float: left;
  position: relative;
  top: 8px;
  margin-right: 20px;
  font-size: 18px;
  color: #d30000;
}

#about img {
  float: left;
  margin: 10px 0 0;   
}

#about #text {
  float: left;
  width: 450px;
  margin: 0 40px 0 0;  
}

#about h2 {
  margin: 0 0 10px 0; 
  float: left; 
  color: #5f829a; 
}

#about p {
  margin: 0 0 10px 0;
  float: left;
}

#teaware {
  float: left;
  width: 100%;
  margin: 0;   
}

#monthly {
  background: url('{{ static_url }}images/homepage/home-monthly.jpg') no-repeat top left;  
  height: 250px;
}

#brewing img {
  float: left;
  margin: 0 20px 0 0;   
}

#brewing h2 {
  font-size: 24px; 
  margin-top: 10px; 
} 

#brewing p {
  padding-right: 30px;
  margin-top: 0;   
}

#sale {
  float: left;
  width: 88%;
  padding:10px 2% 10px 10%;
  background: #fff;
  color: #999;
  border-radius:5px;
  font-family:Helvetica, Arial, sans-serif;
  font-size:14px;
  font-weight: bold;
  margin: 10px 0 20px 0;
  position: relative;
  display:none;
}

#sale .red {
  color: #fff;
  background:red;
  position: absolute;
  padding: 8px 10px;
  border-radius: 5px 0 0 5px;
  left: 0;
  top: 0;
  letter-spacing:-0.5px;
  font-size:18px;
  text-shadow: 0 1px 1px #bd0000;
}

#blogs {
  float: left;
  width: 100%;   
}

#blogs .blog {
  float: left;
  width: 310px;
  margin-right: 15px;
  height: auto; 
  position: relative;  
}

#blogs .blog:last-child {
  margin-right: 0;   
}

#blogs .blog .image {
  height: 240px;
  float: left; 
  margin: 0 0 10px 0;  
}

#blogs .blog:hover .image img {
  opacity: 0.8;   
}

#blogs .blog .text {
    float: left;
    left: 10px;
    max-width: 70%;
    padding: 6px 10px;
    position: absolute;
    text-align: left;
    top: 10px;
    width: auto;
}

#blogs .blog .text:before {
        content: " ";
        display: block;
        width: 0;
        height: 0;
        border-left: 15px solid transparent;     
        border-bottom: 0;
        border-top: 15px solid #fff;
        border-right: 15px solid transparent;
        position: absolute;
        bottom: -15px;
        left: 20px;
        z-index: 2;
        opacity: 0.8;    
}

#blogs .blog .text .back {
    background: none repeat scroll 0 0 #FFFFFF;
    height: 100%;
    left: 0;
    opacity: 0.8;
    position: absolute;
    top: 0;
    width: 100%;
}

#blogs .blog .text h3 {
    font-size: 15px;
    font-weight: 400;
    letter-spacing: -0.5px;
    margin: 0;
    position: relative;
    z-index: 20;
    line-height: 1.4em;
}

#blogs .blog .text h3 a {
}

</style>
{% endblock %}


{% block content %}


<div class="sp">
    
    {% if request.LANGUAGE_CODE == 'en' %}
    {% include 'shop/snippets/2013-jasmine-home-special.html' %}
    {% endif %}

    <div id="special">
        <a href="{{ special.get_absolute_url }}"><span class="link"></span></a>
        <div class="details">
           <h3>{{ special.name }}</h3> 
           <p>{{ special.description }}</p>
           <span class="price">
                <span class="amount">{{ currency.symbol }}{{ special.price.price|floatformat:"-2" }}</span>
	           / {% convert_weights request special.price.weight %}{{ weight_unit }}
	       </span>
	       </h3>
	    </div>
    </div>
    <!-- END OF SPECIAL -->
    
    <div class="hr"></div>

	<div id="teas">
        
        {% include 'shop/snippets/products_long.html' %}
        <h2 class="banner">{% trans 'Check out our bestsellers' %} <a href="{% url finder _('teas') %}">{% trans 'or see our full range of teas' %} &raquo;</a></h2>
    </div>
	<!-- END TEAS LIST -->

    <div id="experts">
        <a href="{% url finder _('about') %}"><span class="link"></span></a>
        <div class="glass-text">
            <div class="back"></div>
            <div class="inner">
            <h2>{% trans 'Buy exceptional loose-leaf Chinese teas from the tea experts actually based in China!' %}</h2>
            <p>{% blocktrans %}We're one of the only Western tea companies actually based near farms and tea growing areas in China - we really believe you can taste the difference - {% endblocktrans %}</a>
            </div>
        </div>
    </div>

    {% if blog_entries %}
    <div id="blogs">
        {% for x in blog_entries %}
            <div class="blog">
                <a href="{{ x.get_absolute_url }}"><span class="link"></span></a>
                <div class="image">
                {% thumbnail x.promo_image "310x240" crop="center" as im %}
                    <img src="{{ im.url }}" />
                {% endthumbnail %}
                </div>
                <div class="text">
                    <div class="back"></div>
                    <h3><a href="{{ x.get_absolute_url }}">{{ x.title }}</a></h3>
                </div>
            </div>
        {% endfor %}
    </div>
    {% endif %}
    
    <div class="hr"></div> 
	
	<div id="teaware">
	   {% with teaware as teas %}
	       {% include 'shop/snippets/products_long.html' %}  
	   {% endwith %}	   
   	   <h2 class="banner">{% trans 'Enjoy your Chinese tea in style' %} - <a href="{% url finder _('teaware') %}">{% trans 'see our full range of teaware' %} &raquo;</a></h2>

	</div>	

	
	    {% if ga_is_on %}
		<ul class="rss {% if page.feature_image %}opaque{% endif %}">
	    	<li id="facebook">
			    <!-- FACEBOOK LIKE -->
	   	<div class="fb-like" data-href="http://www.facebook.com/minrivertea" data-width="120" data-layout="button_count" data-show-faces="false" data-send="false"></div>
	   	       <!-- END FACEBOOK LIKE -->
			</li>
		</ul>
        {% endif %}

</div>
	
{% endblock %}
