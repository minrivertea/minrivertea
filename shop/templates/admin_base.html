{% extends "base.html" %}
{% load thumbnail %}

{% block extracss %}
  <style type="text/css">
      table {font-size: 14px;}
      td { padding:5px 10px 5px 5px;}
      td ul {padding:0; margin:0;}
      td ul li {list-style-type:none;}
      thead {font-weight: bold;}
      h3 {margin: 30px 0 20px 0;}
      div.small-box {background-color: #F1F1F1; float: left; margin: 20px 10px 0 0; padding: 15px 20px; width: 200px; -moz-border-radius: 10px;}
      div.small-box h3 {margin-top: 0px;}
  </style>
{% endblock %}

{% block pagetitle %}Admin Stuff{% endblock %}

{% block content %}

<div id="featured-small"></div>

<div id="main-text-wide">

<h2>Admin pages</h2>
<a href="/admin/">Login to admin interface</a>
<p></p>
<h3>Orders ({{ orders.count }})</h3>
	<table id="orders-table">
		{% if paid_orders %}
		<thead>
			<tr>
			<td>Order ID</td>
			<td>Items</td>
			<td>Owner</td>
			<td>Status</td>
			<td>Date paid</td>
			<td>&nbsp;</td>
			</tr>
		</thead>
		{% endif %}
	{% for order, items in paid_orders %}
		<tr>
			<td>{{ order }}</td>
			<td>
				<ul>
				{% for item in items %}
					<li>{{ item }}</li>
				{% endfor %}
				</ul>
			</td>
			<td><a href="{% url admin_shopper order.owner.id %}">{{ order.owner }}</a></td>
			<td>{{ order.status }}</td>
			<td>{{ order.date_paid }}</td>
			<td><a href="{% url ship_it order.id %}">Ship it</a></td>
		</tr>
	{% empty %}
		<p>No current paid orders</p>
	{% endfor %}
	</table>

<h3>Orders with problems</h3>
	<table id="orders-table">
	{% if order_problems %}
		<thead>
			<tr>
			<td>Order ID</td>
			<td>Items</td>
			<td>Owner</td>
			<td>Status</td>
			<td>Date confirmed</td>
			</tr>
		</thead>
	{% else %}{% endif %}
	{% for order, items in order_problems %}
		<tr>
			<td>{{ order }}</td>
			<td>
				<ul>
				{% for item in items %}
					<li>{{ item }}</li>
				{% endfor %}
				</ul>
			</td>
			<td>{{ order.owner }}</td>
			<td>{{ order.status }}</td>
			<td>{{ order.date_confirmed }}</td>
		</tr>
	{% empty %}
		<p>No current unpaid orders</p>
	{% endfor %}
	</table>

<div class="small-box">
<h3>Stocks</h3>
{% for product in products %}
	{{ product }}<br/>
{% endfor %}
</div>

<div class="small-box">
<h3>Total sales</h3>
{{ total_sales }} ({{ orders.count }} orders)
</div>

<div class="small-box">
<h3>Photos</h3>
<p>{{ unpublished_photos.count }} unpublished photos</p>
<p>{{ published_photos.count }} published photos</p>
</div>

</div>
{% endblock %}
